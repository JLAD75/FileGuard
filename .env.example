# ==========================================
# FileGuard Environment Configuration
# ==========================================
# Copy this file to .env and fill in your values
# Never commit .env to version control!

# ==========================================
# Application
# ==========================================
APP_NAME=FileGuard
APP_ENV=development  # development, staging, production
APP_VERSION=2.0.0
DEBUG=true

# ==========================================
# Security
# ==========================================
# IMPORTANT: Generate a secure random key for production!
# Example: openssl rand -hex 32
SECRET_KEY=your-secret-key-change-this-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Requirements
MIN_PASSWORD_LENGTH=12
REQUIRE_SPECIAL_CHARS=true
REQUIRE_NUMBERS=true
REQUIRE_UPPERCASE=true

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ==========================================
# Database (PostgreSQL)
# ==========================================
POSTGRES_SERVER=localhost
POSTGRES_PORT=5432
POSTGRES_USER=fileguard
POSTGRES_PASSWORD=your-secure-password
POSTGRES_DB=fileguard_db

# Connection Pool
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_PRE_PING=true

# Full connection string (auto-generated if not set)
# DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_SERVER}:${POSTGRES_PORT}/${POSTGRES_DB}

# ==========================================
# Redis (Caching & Celery)
# ==========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# Celery Configuration
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}

# ==========================================
# Object Storage (S3/MinIO)
# ==========================================
# Use S3 or MinIO for file storage
STORAGE_BACKEND=minio  # s3 or minio

# MinIO Configuration
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_SECURE=false  # true for HTTPS
MINIO_BUCKET=fileguard-files

# AWS S3 Configuration (if using S3)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
S3_BUCKET=fileguard-files
S3_ENDPOINT_URL=  # Custom endpoint for S3-compatible storage

# ==========================================
# ClamAV Antivirus
# ==========================================
CLAMAV_HOST=localhost
CLAMAV_PORT=3310
CLAMAV_ENABLED=true
CLAMAV_TIMEOUT=120

# ==========================================
# CORS Configuration
# ==========================================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:8000
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_ALLOW_HEADERS=*

# ==========================================
# File Upload Configuration
# ==========================================
MAX_FILE_SIZE_MB=500
MAX_CHUNK_SIZE_MB=10
ALLOWED_EXTENSIONS=*  # * for all, or comma-separated: pdf,docx,jpg,png
STORAGE_PATH=/var/lib/fileguard/storage

# ==========================================
# Email Configuration (for notifications)
# ==========================================
SMTP_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=noreply@fileguard.com
SMTP_FROM_NAME=FileGuard

# ==========================================
# Logging
# ==========================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json or text
LOG_FILE=/var/log/fileguard/app.log
LOG_MAX_SIZE_MB=100
LOG_BACKUP_COUNT=10

# ==========================================
# Frontend Configuration
# ==========================================
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000/ws
NEXT_PUBLIC_APP_NAME=FileGuard
NEXT_PUBLIC_MAX_FILE_SIZE_MB=500

# Analytics
NEXT_PUBLIC_ENABLE_ANALYTICS=false
NEXT_PUBLIC_GA_TRACKING_ID=

# PWA
NEXT_PUBLIC_PWA_ENABLED=true

# ==========================================
# Monitoring & Observability
# ==========================================
# Sentry
SENTRY_ENABLED=false
SENTRY_DSN=
SENTRY_ENVIRONMENT=${APP_ENV}

# Prometheus
PROMETHEUS_ENABLED=true
METRICS_PORT=9090

# ==========================================
# Feature Flags
# ==========================================
FEATURE_FILE_VERSIONING=true
FEATURE_FILE_SHARING=true
FEATURE_REAL_TIME_NOTIFICATIONS=true
FEATURE_ADVANCED_SEARCH=true
FEATURE_ANALYTICS_DASHBOARD=true
FEATURE_TWO_FACTOR_AUTH=true
FEATURE_BULK_OPERATIONS=true

# ==========================================
# Development Only
# ==========================================
# SQLAlchemy Debug (prints SQL queries)
SQLALCHEMY_ECHO=false

# Auto-reload on code changes
RELOAD=true

# Swagger UI
ENABLE_DOCS=true
DOCS_URL=/docs
REDOC_URL=/redoc
